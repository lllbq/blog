---
layout: post
title:  "零零碎碎的概率论"
subtitle: '零零碎碎的概率论'
date:   2019-10-20 17:21
tags: 数学
description: '零零碎碎的概率论'
color: 'rgb(230,230,250)'
cover: '/../assets/picture/Halloween02.jpg'
---

**对概率的认识:**$ P(x) \in [0,1]$

- $p=0$ : 事件出现的概率为0，即事件不会发生
- 若$x$为离散/连续变量，则$P(x=x_0)$表示$x_0$发生的概率/概率密度

**累积分布函数:** $F(x)=P(x \leq x_0)$

- $F(x)$一定为单调递增函数
- $min(F(x))=0,max(F(x))=1$
- 若$y=F(x)$可导，则$f(x)=F'(x)$为某概率密度函数

**古典概型**

**例1:** 将$n$个不同的球放入$N(N\geq n)$个盒子中， 假设盒子容量无限，求事件$A$={每个盒子至多有1个球}的概率 

**解:** $P(A)=\frac{P_N^n}{N^n}$

基本事件总数:

- 第一个球，有N种放法

- 第二个球，有N种放法

- ……

- 共: $N^n$种放法

每个盒子至多放一个球的事件数:

- 第一个球，有N种放法
- 第二个球，有N-1种放法
- 第三个球，有N-2种放法
- ……
- 共: $N(N-1)(N-2)...(N-n+1)=P^n_N$

**例2:** 假定班里有50位同学， 则至少有2人生日相同的概率是多少? 

**解:** $N=365,n=50$

$P=1-\frac{A^{50}_{365}}{365^{50}} \approx 0.97$

**例3:** 将12件正品和3件次品随机装在3个箱子中，每箱装5件，则每箱中恰有1件次品的概率是多少? 

**解:**

将15件产品装入3个箱子，每箱装5件，共有$\frac{15!}{5!5!5!}$种装法 

先把3件次品放入3个箱子，有3!种装法。对于这样的每一种装法，把其余12件产品装入3个箱子，每箱装4件，共有$\frac{12!}{4!4!4!}$种装 法 

$P=\frac{12!}{4!4!4!}/\frac{15!}{5!5!5!}$

**组合数**

- 把$n$个物品分成$k$组，使得每组物品的个数分别为$n_1,n_2...n_k,(n=n_1+n_2+...+n_k)$，则不同的分组方法有$\frac{n!}{n_1!n_2!...n_k!}$种 
- 上述问题的简化版本，即$n$个物品分成2组，第一组$m$个，第二组$n-m$个，则分组方法$\frac{n!}{m!(n-m)!}$，即: $C_n^m$ 

**组合数背后的秘密**

$H=\frac{1}{N}ln\frac{N!}{\prod_{i=1}^{k}n_i!}=\frac{1}{N}ln(N!)-\frac{1}{N}\sum_{i=1}^kln(n_i!)$

$\rightarrow (lnN-1)-\frac{1}{N}\sum_{i=1}^kn_i(ln\space n_i-1)$

$=lnN-\frac1N\sum_{i=1}^kn_iln\space n_i=-\frac1N((\sum_{i=1}^kn_iln\space n_i)-NlnN)$

$=-\frac1N\sum_{i=1}^k(n_iln\space n_i-n_ilnN)=-\frac1N\sum_{i=1}^k(n_iln\frac{n_i}{N})$

$=-\sum_{i=1}^k(\frac{n_i}{N}ln\frac{n_i}{N})\rightarrow-\sum_{i=1}^k(p_ilnp_i)$

**商品推荐**

商品推荐场景中过于聚焦的商品推荐往往会损害用户的购物体验，在有些场景中，系统会通过一定程度的随机性给用户带来发现的惊喜感。
假设在某推荐场景中，经计算A和B两个商品与当 前访问用户的匹配度分别为0.8分和0.2分，系统将随机为A生成一个均匀分布于0到0.8的最终得分，为B生成一个均匀分布于0到0.2的最终得分，试计算最终B的分数大于A的分数的概率。

**解:** 几何概型

**概率公式**

- 条件概率: $P(A\mid B)=\frac{P(AB)}{P(B)}$
- 全概率公式: $P(A)=\sum_iP(A\mid B_i)P(B_i)$
- 贝叶斯公式: $P(B_i\mid A)=\frac{P(A\mid B_i)P(B_i)}{\sum_jP(A\mid B_j)P(B_j)}$

**例1:** 8支步枪中有5支已校准过，3支未校准。一名射手用校准过的枪射击，中靶概率为0.8；用未校准的枪射击，中靶概率为0.3；现从8 支枪中随机取一支射击，结果中靶。求该枪是已校准过的概率。 

**解:** 

$P(G=1)=\frac58,P(G=0)=\frac38$

$P(A=1\mid G=1)=0.8,P(A=0\mid G=1)=0.2$

$P(A=1\mid G=0)=0.3,P(A=0\mid G=0)=0.7$

$P(G=1\mid A=1)=\frac{P(A=1\mid G=1)P(G=1)}{\sum_{i\in G}P(A=1\mid G=i)P(G=i)}=\frac{0.8\frac58}{0.8\frac58+0.3\frac38}=0.8163$

**贝叶斯公式粗解**

给定某系统的若干样本$x$，计算该系统的参数，即$P(\theta\mid x)=\frac{P(x\mid\theta)P(\theta)}{P(x)}$

-  $P(\theta)$: 没有数据支持下，$\theta$发生的概率，称为先验概率
- $P(\theta\mid x)$: 在数据$x$的支持下，$\theta$发生的概率，称为后验概率
- $P(x\mid\theta)$: 给定某参数$\theta$的概率分布，称为似然函数

**常见分布**

**两点分布~(0-1)分布~伯努利分布**

|   X   |  1   |  0   |
| :---: | :--: | :--: |
| **P** |  p   | 1-p  |

$E(X)=p$

$Var(X)=E(X^2)-[E(X)]^2=1^2p+0^2(1-p)-p^2=pq$

**二项分布**$X\sim B(n,p)$

$P(X=k)=C_n^kp^k(1-p)^{n-k},(k=0,1,2,...,n)$

$E(X)=\sum_{k=0}^nkP\{X=k\}=\sum_{k=0}^nkC_n^kp^k(1-p)^{n-k}=np$

$Var(X)=np(1-p)$

**泊松分布**$X\sim\pi(\lambda)$

$P(X=k)=\frac{\lambda^k}{k!}e^{-\lambda},k=0,1,2,...,\lambda>0$

$E(X)=\sum_{k=0}^\infty k\frac{\lambda^k}{k!}e^{-\lambda}=e^{-\lambda}\sum_{k=1}^\infty \frac{\lambda^{k-1}}{(k-1)!}\lambda=\lambda e^{-\lambda}e^\lambda=\lambda$ (泰勒公式)

$Var(X)=\lambda$

在实际事例中，当一个随机事件，以固定的平均瞬时速率$\lambda$(或称密度)随机且独立地出现时，那么这个事件在单位时间(面积或体积)内出现的次数或个数就近似地服从泊松分布$P(\lambda)$。

**均匀分布**$X\sim U(a,b)$

$f(x)=\frac{1}{b-a},a<x<b$，其他情况下$f(x)=0$

$E(X)=\frac12(a+b)$

$Var(X)=\frac{(b-a)^2}{12}$

**指数分布**$X\sim P(\theta)$

$f(x)=\frac{1}{\theta}e^{\frac{-x}{\theta}},x>0$，当$x \leq 0$时，$f(x)=0$，其中$\theta > 0$

$or$ $f(x)=\lambda e^{-\lambda x},x>0$，当$x \leq 0$时，$f(x)=0$，其中$\lambda > 0$

$E(X)=\theta$

$Var(X)=\theta^2$

- 其中$\lambda>0$是分布的一个参数，常被称为**率参数(rate parameter)**。即每单位时间内发生某事件的次数。指数分布的区间是$[0,\infty]$。如果一个随机变量$X$呈指数分布，则可以写作: $X\sim Exponential(\lambda)$。 
- 指数分布可以用来表示独立随机事件发生的时间间隔，比如旅客进机场的时间间隔、软件更新的时间间隔等等。 
- 许多电子产品的寿命分布一般服从指数分布。有的系统的寿命分布也可用指数分布来近似。它在可靠性研究中是最常用的一种分布形式。 

**指数分布的无记忆性(遗失记忆性)**

如果一个随机变量呈指数分布，当$s,t\geq0$时有: $P(x>s+t\mid x>s)=P(x>t)$

即，如果$x$是某电器元件的寿命，已知元件使用 了$s$小时，则共使用至少$s+t$小时的条件概率，与从未使用开始至少使用$t$小时的概率相等。 

**正态分布**$X\sim N(\mu,\sigma^2)$

$f(x)=\frac{1}{\sqrt{2\pi\sigma}}e^{-\frac{(x-\mu)^2}{2\sigma^2}},\sigma>0,-\infty<x<+\infty$

$E(X)=\mu$

$Var(X)$

**指数族分布**

$p(y;\eta)=b(y)exp(\eta^TT(y)-a(\eta))$

- 伯努利分布属于指数族

$p(y;\phi)=\phi^y(1-\phi)^{1-y}$

$=exp(yln\phi+(1-y)ln(1-\phi))$

$=exp((ln(\frac{\phi}{1-\phi}))y+ln(1-\phi))$

其中 $T(y)=y,a(\eta)=-ln(1-\phi)=ln(1+e^\eta),b(y)=1$

- 高斯分布属于指数族

$p(y;\mu)=\frac{1}{\sqrt{2\pi}}exp(-\frac12(y-\mu)^2)$

$=\sqrt{2\pi}exp(-\frac12y^2)*exp(\mu y-\frac12\mu^2)$

其中 $\eta=\mu,T(y)=y,a(\eta)=\frac{\mu^2}{2}=\frac{\eta^2}{2},b(y)=\frac{1}{\sqrt{2\pi}}exp(\frac{-y^2}{2})$

**例1:** A、B两国元首相约在首都机场晚20点至24点交换一份重要文件。如果A国的飞机先到，A会等待1个小时；如果B国的飞机先到了，B会等待2个小时。假设两架飞机在20点至24点降落机场的概率是均匀分布，试计算能够在20点至24点完成交换的概率。(假设交换文件本身不需要时间) 

**例2:** 

给定一个分类器$p$，它有0.5的概率输出1，0.5的概率输出0。

- 如何生成一个分类器使该分类器输出1的概率为0.25，输出0的概率为0.75?
- 如何生成一个分类器使该分类器输出1的概率为0.3，输出0的概率为0.7? 